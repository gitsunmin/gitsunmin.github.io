<!DOCTYPE html><html lang="ko"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Gitsunmin's website | 김선민의 웹사이트"><title>nextjs - TIL - Gitsunmin</title><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CDGfc0hd.js"></script><link rel="stylesheet" href="/_astro/blog.BVCk-ah5.css"></head> <body> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="mE0JQ" component-url="/_astro/Providers.DM2VvpnK.js" component-export="Providers" renderer-url="/_astro/client.9unXo8s5.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Providers&quot;,&quot;value&quot;:&quot;react&quot;}" await-children><template data-astro-template>  <astro-island uid="2t9TGb" component-url="/_astro/Header.DohD74y_.js" component-export="Header" renderer-url="/_astro/client.9unXo8s5.js" props="{&quot;title&quot;:[0,&quot;TIL&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;Header&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> <main class="flex flex-col justify-center min-h-[calc(100dvh-48px)] md:min-h-[calc(100dvh-64px)] w-full">  <div class="px-6 py-4 md:py-8 md:px-0 w-full md:max-w-(--breakpoint-md) mx-auto"><h1 class="text-5xl font-bold mb-12 w-full">TIL<div class="text-xl font-normal text-gray-500 dark:text-gray-400">(=Today I Learned)</div></h1> <article class="prose dark:prose-invert max-w-none"> <h1 id="learning-next-js" class="text-4xl font-bold text-foreground mb-4 w-full">Learning Next js</h1>
<h2 id="install-nextjs" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">install nextjs</h2>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">npx</span><span style="color:#9ECBFF"> create-next-app@latest</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h2 id="routingapp-router" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">Routing(App Router)</h2>
<p class="text-foreground leading-relaxed mb-4 w-full">next의 App Router는 pages 디렉토리에 있는 파일들을 기반으로 자동으로 라우팅을 해줍니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> README.md</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> next-env.d.ts</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> next.config.js</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> node_modules</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> package-lock.json</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> package.json</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> pnpm-lock.yaml</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> postcss.config.js</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> public</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> src</span></span>
<span class="line"><span style="color:#B392F0">    └──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> favicon.ico</span><span style="color:#6A737D"> # favicon</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> globals.css</span><span style="color:#6A737D"> # 글로벌 css</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> loading.tsx</span><span style="color:#6A737D"> # 로딩 화면</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> error.tsx</span><span style="color:#6A737D"> # 에러 화면</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> global-error.tsx</span><span style="color:#6A737D"> # 글로벌 에러 화면</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> template.tsx</span><span style="color:#6A737D"> # 템플릿 파일</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> not-found.tsx</span><span style="color:#6A737D"> # 404 화면</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">├──</span><span style="color:#9ECBFF"> tailwind.config.ts</span></span>
<span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> tsconfig.json</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">app 폴더의 안에 app폴더를 만들었습니다. 이 app폴더는 위에서 이야기한대로, 폴더에 있는 파일들을 기반으로 자동으로 라우팅을 해주는 역할을 합니다. 그리고 app폴더 안에는 favicon, 글로벌 css, 로딩 화면, 에러 화면, 글로벌 에러 화면, 템플릿 파일, 404 화면, UI의 레이아웃을 담당하는 파일, 페이지를 담당하는 파일이 있습니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">loading.tsx</code>파일은 페이지가 로딩될 때 보여지는 화면을 담당합니다. 특이한 점은 app 하위 페이지 또는 모든 곳에 사용이 가능하며 각각 다른 loading 화면을 보여줄 수 있습니다. 그리고, 이는 우선순위에 따라서 호출과 하이드레이션을 나누어 진행하여 사용자에게 더 나은 경험을 제공할 수 있습니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">error.tsx</code>, <code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">global-error.tsx</code>는 error boundary를 제공하여 사용자에게 오류에 대한 메시지를 진해 또는 회복할 수 있는 방법을 제공합니다.</p>
<h3 id="dynamic-routes" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Dynamic Routes</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">또 다른 path를 만들기 위해서는 app폴더 안에 새로운 폴더를 만들어 주면 됩니다. 예를 들면</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> blog</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> dashboard</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이런식으로 만들어 주면 됩니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">또 특별한 형식을 이용해서 root path에 다른 경로를 만들 수도 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#E1E4E8"> [...slug]</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이렇게 만들어진 페이지는 다음과 같이 접근할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">http://localhost:3000/1</span></span>
<span class="line"><span style="color:#B392F0">http://localhost:3000/2</span></span>
<span class="line"><span style="color:#B392F0">http://localhost:3000/3</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">또, 단순히 폴더를 분리하기 위해서는 다음과 같이 만들어 줄 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#E1E4E8"> (blog)</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#E1E4E8"> [...slug]</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">            └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이렇게 구성하면 blog라는 폴더는 라우팅이 되지 않습니다.
이 구조 또한 위와 같이</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">http://localhost:3000/1</span></span>
<span class="line"><span style="color:#B392F0">http://localhost:3000/2</span></span>
<span class="line"><span style="color:#B392F0">http://localhost:3000/3</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">의 접근이 가능합니다.</p>
<h3 id="parallel-routes" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Parallel Routes</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">nextjs은 같은 path에 두 개의 페이지를 랜더링 할 수 있습니다. 이는 다음과 같이 구성할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> @dashboard</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">            └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> @blog</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">            └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이렇게 구성 후에 root Layout에서 아래와 같이 사용할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> Layout</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">props</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  children</span><span style="color:#F97583">:</span><span style="color:#B392F0"> React</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">ReactNode</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  dashboard</span><span style="color:#F97583">:</span><span style="color:#B392F0"> React</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">ReactNode</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  blog</span><span style="color:#F97583">:</span><span style="color:#B392F0"> React</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">ReactNode</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">      {props.children}</span></span>
<span class="line"><span style="color:#E1E4E8">      {props.dashboard}</span></span>
<span class="line"><span style="color:#E1E4E8">      {props.blog}</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h3 id="intercepting-routes" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Intercepting Routes</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">이름처럼 이 Intercepting Routes는 사용자가 접근한 경로를 가로채서, 실제 페이지의 이동이 아닌, 마치 팝업처럼 화면에 보여줄 수 있습니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">예를 들어서 <code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">card/list</code>에서 이미지를 클릭하여 <code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">photo/123</code>으로 route를 이동하며, 바닥에 카드 리스트가 있는 상태에서 오버레이와 함께 photo페이지의 123이라는 파람을 가진 페이지를 보여줄 수 있습니다. 또한, 새로고침을 하거나 직접 <code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">photo/123</code>으로 접근을 하면, 독립적으로 photo페이지를 보여줄 수 있습니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">이 기능은 다음과 같이 구현할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> photo</span></span>
<span class="line"><span style="color:#B392F0">        ├──</span><span style="color:#9ECBFF"> @modal</span></span>
<span class="line"><span style="color:#B392F0">            └──</span><span style="color:#E1E4E8"> (..)photo</span></span>
<span class="line"><span style="color:#B392F0">                └──</span><span style="color:#E1E4E8"> [id]</span></span>
<span class="line"><span style="color:#B392F0">                    ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">                    ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">                    └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> card</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> list</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">            ├──</span><span style="color:#9ECBFF"> layout.tsx</span><span style="color:#6A737D"> # UI의 레이아웃을 담당하는 파일</span></span>
<span class="line"><span style="color:#B392F0">            └──</span><span style="color:#9ECBFF"> page.tsx</span><span style="color:#6A737D"> # 페이지를 담당하는 파일</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">또한, 이 (..)같은 표현은 조금 이질감이 느껴지지만,,, 받아드려야할 것 같네요. 아래와 같은 정의가 있습니다.</p>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">(.) 현재 디렉토리를 가리킵니다.</li>
<li class="mb-2">(..) 바로 상위 디렉토리를 가리킵니다.</li>
<li class="mb-2">(..)(..) 두 단계 상위 디렉토리를 가리킵니다.</li>
<li class="mb-2">(…) root 디렉토리를 가리킵니다.</li>
</ul>
<h3 id="route-handlers" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Route Handlers</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">Next에서는 page를 제공하는 route 외에도 api를 제공하는 route를 생성할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">└──</span><span style="color:#9ECBFF"> app</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> api</span></span>
<span class="line"><span style="color:#B392F0">        └──</span><span style="color:#9ECBFF"> route.ts</span><span style="color:#6A737D"> # &lt;- api route</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> ...</span></span>
<span class="line"><span style="color:#B392F0">    ├──</span><span style="color:#9ECBFF"> layout.tsx</span></span>
<span class="line"><span style="color:#B392F0">    └──</span><span style="color:#9ECBFF"> page.tsx</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이 API는 모든 METHOD를 지원합니다. 그리고, 이 API는 다음과 같이 정의할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { NextResponse } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;next/server&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> GET</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://gitsunmin.dev/...&#39;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">    headers: {</span></span>
<span class="line"><span style="color:#9ECBFF">      &#39;Content-Type&#39;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&#39;application/json&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> data</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> res.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> NextResponse.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">({ data });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">fetch api를 사용하여 다른 METHOD를 사용할 수 있으며 cashing과 다른 option의 사용이 가능합니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">또 header와 cookie를 제공하는 것도 가능합니다.</p>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">cookie</li>
</ul>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { cookies } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;next/headers&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> GET</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">request</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Request</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> cookieStore</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> cookies</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> token</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> cookieStore.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;token&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Response</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Hello, Next.js!&#39;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">    status: </span><span style="color:#79B8FF">200</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    headers: { </span><span style="color:#9ECBFF">&#39;Set-Cookie&#39;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">`token=${</span><span style="color:#E1E4E8">token</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">value</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">header</li>
</ul>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { headers } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;next/headers&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> GET</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">request</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Request</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> headersList</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> headers</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> referer</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> headersList.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;referer&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Response</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Hello, Next.js!&#39;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">    status: </span><span style="color:#79B8FF">200</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    headers: { referer: referer },</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">redirect도 가능합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { redirect } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;next/navigation&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> GET</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">request</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Request</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#B392F0">  redirect</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://nextjs.org/&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이 api는 아래와 route와 비슷하게 아래 처럼 사용 가능합니다.</p>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">app/items/[slug]/route.js
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">요청: /items/a</li>
<li class="mb-2"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">{ slug: &#39;a&#39; }</code></li>
</ul>
</li>
<li class="mb-2">app/items/[slug]/route.js
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">요철: /items/b</li>
<li class="mb-2"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">{ slug: &#39;b&#39; }</code></li>
</ul>
</li>
<li class="mb-2">app/items/[slug]/route.js
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">요청: /items/c</li>
<li class="mb-2"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm">{ slug: &#39;c&#39; }</code></li>
</ul>
</li>
</ul>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> GET</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#FFAB70">  request</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Request</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  { </span><span style="color:#FFAB70">params</span><span style="color:#E1E4E8"> }</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">params</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">slug</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> } }</span></span>
<span class="line"><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> slug</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> params.slug; </span><span style="color:#6A737D">// &#39;a&#39;, &#39;b&#39;, or &#39;c&#39;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h3 id="middleware" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Middleware</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">next에서 제공하는 미들웨어를 사용하기 위해서는 src/middleware.ts 파일을 생성해야 합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#6A737D">// middleware.ts</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { NextResponse } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;next/server&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#F97583"> type</span><span style="color:#E1E4E8"> { NextRequest } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;next/server&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// This function can be marked `async` if using `await` inside</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> middleware</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">request</span><span style="color:#F97583">:</span><span style="color:#B392F0"> NextRequest</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;야호!&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// See &quot;Matching Paths&quot; below to learn more</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#79B8FF"> config</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  matcher: </span><span style="color:#9ECBFF">&#39;/*&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이렇게 정의 하면 모든 페이지에 방문할 때 마다 middleware가 실행됩니다. (야호!)</p>
<p class="text-foreground leading-relaxed mb-4 w-full">이 기능을 이용하여 Redirect, Cookie 사용, Header 업데이트를 할 수 있습니다. 그리고 config의 matcher는 정규 표현식을 사용하며 array로 선언하여 다중 matcher를 사용할 수 있습니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">다만, 이 기능은 SSR에서만 사용이 가능하며, 단순 페이지 이동 api 통신 뿐만아니라 서버에서 받아오는 모든 파일에 적용이 됩니다. 그렇기 때문에, 이 기능을 사용할 때에는 불필요한 middleware를 호출을 막기 위해서 matcher를 잘 적용해두어야합니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">예시로서 다음과 같이 사용할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#6A737D">// middleware.ts</span></span>
<span class="line"><span style="color:#F97583">...</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#79B8FF"> config</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  matcher: [</span></span>
<span class="line"><span style="color:#9ECBFF">    &#39;/((?!_next/static|_next/images|images|favicon.ico|application/views/pegasus/__assets/).*)&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  ],</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">위 코드는 _next/static, _next/images, images, favicon.ico, application/views/pegasus/__assets/를 제외한 모든 경로에 middleware를 적용합니다. 이렇게 하면, 불필요한 middleware를 호출하는 것을 막을 수 있습니다.</p> </article> </div>  </main> <link rel="preload" as="image" href="https://github.com/gitsunmin.png"/><footer class="p-4 mt-4 flex flex-col gap-y-4 bg-background-footer text-foreground-footer"><div class="flex items-center gap-4 justify-cente w-full"><img src="https://github.com/gitsunmin.png" alt="logo" class="rounded-full size-10"/><span>Powered by Gitsunmin</span></div><ul class="flex gap-2 justify-end"><li><a href="https://github.com/gitsunmin" target="_blank" rel="noreferrer" class="text-blue-500 hover:underline">GitHub</a></li><li><a href="https://www.linkedin.com/in/gitsunmin/" target="_blank" rel="noreferrer" class="text-blue-500 hover:underline">LinkedIn</a></li></ul></footer>  </template><!--astro:end--></astro-island> </body></html>