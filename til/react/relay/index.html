<!DOCTYPE html><html lang="ko"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Gitsunmin's website | 김선민의 웹사이트"><title>relay - TIL - Gitsunmin</title><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CDGfc0hd.js"></script><link rel="stylesheet" href="/_astro/blog.BVCk-ah5.css"></head> <body> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="iS4cw" prefix="r229" component-url="/_astro/Providers.CDrezrva.js" component-export="Providers" renderer-url="/_astro/client.9unXo8s5.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;Providers&quot;,&quot;value&quot;:true}" await-children><astro-slot>  <astro-island uid="2t9TGb" component-url="/_astro/Header.DohD74y_.js" component-export="Header" renderer-url="/_astro/client.9unXo8s5.js" props="{&quot;title&quot;:[0,&quot;TIL&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;Header&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> <main class="flex flex-col justify-center min-h-[calc(100dvh-48px)] md:min-h-[calc(100dvh-64px)] w-full">  <div class="px-6 py-4 md:py-8 md:px-0 w-full md:max-w-(--breakpoint-md) mx-auto"><h1 class="text-5xl font-bold mb-12 w-full">TIL<div class="text-xl font-normal text-gray-500 dark:text-gray-400">(=Today I Learned)</div></h1> <article class="prose dark:prose-invert max-w-none"> <h1 id="relay" class="text-4xl font-bold text-foreground mb-4 w-full">Relay</h1>
<p class="text-foreground leading-relaxed mb-4 w-full">Relay는 GraphQL로 데이터를 Query하고, Mutation하는 데 사용되는 React 전용 라이브러리입니다. 기본적으로 뛰어난 성능을 제공하며, 스키마 기반으로 GraphQL 코드를 안정적으로 관리하기 위해 사용됩니다.</p>
<h2 id="relay의-특징" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">Relay의 특징</h2>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Declarative data: 각 컴포넌트에 필요한 데이터를 선언하기만 하면, Relay가 로딩 상태를 처리합니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Co-location and composability: 각 컴포넌트는 자체적으로 필요한 데이터를 선언하고, Relay는 이를 효율적인 쿼리로 결합합니다. 다른 화면에서 컴포넌트를 재사용하면 쿼리가 자동으로 업데이트됩니다.</p>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">Co-location: Co-location은 프로그래밍에서 데이터와 이를 사용하는 코드를 같은 위치에 두는 것을 의미합니다. 이는 코드의 가독성을 높이고, 관련 로직을 더 쉽게 추적할 수 있게 해줍니다.</li>
</ul>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Pre-fetching: Relay는 코드를 분석하여 코드를 다운로드하거나 실행하기 전에 쿼리를 가져올 수 있습니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">UI patterns: Relay는 로딩 상태, 페이지네이션, refetching, 낙관적 업데이트, 롤백 및 기타 일반적인 UI 동작을 구현합니다.</p>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">낙관적 업데이트(optimistic updates): 서버에 변경 사항을 보내기 전에 먼저 UI를 업데이트하여 사용자에게 즉각적인 반응을 제공하는 방식을 의미합니다.</li>
</ul>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Consistent updates: Relay는 정규화된 데이터 저장소를 유지하므로 동일한 데이터를 관찰하는 컴포넌트는 다른 쿼리로 도달하더라도 동기화됩니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Streaming and deferred data: 쿼리의 일부를 선언적으로 지연시키고, Relay는 데이터가 스트리밍됨에 따라 UI를 점진적으로 다시 렌더링합니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Great developer experience: Relay는 GraphQL 스키마에 대한 자동 완성 및 정의로 이동 기능을 제공합니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Type safety: Relay는 오류를 런타임이 아닌 정적으로 잡아내도록 타입 정의를 생성합니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Manage local data: 서버 데이터와 로컬 클라이언트 상태에 동일한 API를 사용합니다.</p>
</li>
<li class="mb-2">
<p class="text-foreground leading-relaxed mb-4 w-full">Hyper-optimized runtime: Relay는 끊임없이 최적화됩니다. JIT 친화적인 런타임은 어떤 페이로드를 기대할지 정적으로 결정하여 들어오는 데이터를 더 빠르게 처리합니다.</p>
<ul class="list-disc list-inside mb-4 w-full">
<li class="mb-2">JIT (Just In Time): 프로그램이 실행되는 도중에 필요한 부분만을 즉석에서 컴파일하는 방식을 의미합니다. 프로그램이 실행되는 도중에 필요한 부분만을 즉석에서 컴파일하는 방식을 의미합니다.</li>
<li class="mb-2">AOT (Ahead Of Time): 프로그램이 실행되기 전에 필요한 부분을 미리 컴파일하는 방식을 의미합니다.</li>
</ul>
</li>
</ul>
<h2 id="relay-compiler" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">Relay Compiler</h2>
<p class="text-foreground leading-relaxed mb-4 w-full">Relay Compiler는 GraphQL 쿼리를 JavaScript 코드로 변환합니다. 또한 한 페이지에서 독립적으로 사용중인 Query가 있을 경우에 이를 하나의 쿼리로 결합합니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">직접 실행해볼수도 있다.
<a class="text-blue-500 dark:text-blue-400 hover:underline" target="_blank" rel="noopener noreferrer" href="https://relay.dev/compiler-explorer/#enc=1&amp;schemaText=C4TwDgpgBAqgzhATlA3gKClAdgQwLYQBcUAysIgJZYDmGUO1RUAklsHQEYRzAD6AZpQhYAJsXhI0AXzRpQkKAEUArkhCo6BcQkTSgA&amp;documentText=I4VwpgTgngBAslAiuaMDeAoGMC2Z1bYwB2AhnodgHQ0CCA5mAGISn17EAulMARmAGdOAfQBmEAJZhiAEwJEiNKg2at207goC%2BhHTozi2HTjBUsjGmAHtiMAKoDI8kuTAYdQA&amp;outputType=operation&amp;no_inline=true&amp;enable_3d_branch_arg_generation=true&amp;actor_change_support=true&amp;text_artifacts=true&amp;language=typescript">여기</a></p>
<h2 id="fragment" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">Fragment</h2>
<p class="text-foreground leading-relaxed mb-4 w-full">Relay는 GraphQL의 Fragment를 사용하여 컴포넌트에 필요한 데이터를 선언합니다. Fragment는 GraphQL의 Query와 유사하지만, 이름이 있고, 재사용 가능하며, 컴포넌트에 필요한 데이터만을 포함합니다.</p>
<h3 id="fragment-사용법" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Fragment 사용법</h3>
<ol class="list-decimal list-inside mb-4 w-full">
<li class="mb-2">정의하기</li>
</ol>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">import</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">graphql</span><span style="color:#E1E4E8"> } </span><span style="color:#B392F0">from</span><span style="color:#E1E4E8"> &#39;</span><span style="color:#B392F0">relay</span><span style="color:#E1E4E8">-</span><span style="color:#B392F0">runtime</span><span style="color:#E1E4E8">&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">const</span><span style="color:#B392F0"> ImageFragment</span><span style="color:#E1E4E8"> = </span><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  fragment</span><span style="color:#B392F0"> ImageFragment</span><span style="color:#F97583"> on</span><span style="color:#79B8FF"> Image</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">    url</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`;</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<ol class="list-decimal list-inside mb-4 w-full" start="2">
<li class="mb-2">사용하기</li>
</ol>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">const</span><span style="color:#B392F0"> StoryFragment</span><span style="color:#E1E4E8"> = </span><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  fragment</span><span style="color:#B392F0"> StoryFragment</span><span style="color:#F97583"> on</span><span style="color:#79B8FF"> Story</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">    title</span></span>
<span class="line"><span style="color:#FFAB70">    summary</span></span>
<span class="line"><span style="color:#FFAB70">    postedAt</span></span>
<span class="line"><span style="color:#FFAB70">    poster</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">PosterBylineFragment</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#FFAB70">    thumbnail</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">ImageFragment</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`;</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<ol class="list-decimal list-inside mb-4 w-full" start="3">
<li class="mb-2">useFragment로 사용하기</li>
</ol>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { useFragment } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;react-relay&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#F97583"> type</span><span style="color:#E1E4E8"> { ImageFragment$key } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &quot;./__generated__/ImageFragment.graphql&quot;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Props</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  image</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ImageFragment$key</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">  ...</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> Image</span><span style="color:#E1E4E8">({</span><span style="color:#FFAB70">image</span><span style="color:#E1E4E8">}</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Props</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> data</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> useFragment</span><span style="color:#E1E4E8">(ImageFragment, image);</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> &lt;</span><span style="color:#B392F0">img</span><span style="color:#B392F0"> key</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#B392F0">data</span><span style="color:#E1E4E8">.</span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">} </span><span style="color:#B392F0">src</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{</span><span style="color:#B392F0">data</span><span style="color:#E1E4E8">.</span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">} ... /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h2 id="glossary" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">Glossary</h2>
<h3 id="directive" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">Directive</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">릴레이 컴파일러나 서버에 특수 명령을 제공하는 graphql 리터럴 또는 graphql 파일에 포함되어 있습니다.</p>
<h4 id="arguments" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">@arguments</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">fragment spread에 인자를 전달할 때 사용합니다. 인자는 fragment 정의에서 @argument로 선언되어야 합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">const</span><span style="color:#B392F0"> StoryFragment</span><span style="color:#E1E4E8"> = </span><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  fragment</span><span style="color:#B392F0"> StoryFragment</span><span style="color:#F97583"> on</span><span style="color:#79B8FF"> Story</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">    title</span></span>
<span class="line"><span style="color:#FFAB70">    summary</span></span>
<span class="line"><span style="color:#FFAB70">    postedAt</span></span>
<span class="line"><span style="color:#FFAB70">    poster</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">PosterBylineFragment</span><span style="color:#B392F0"> @arguments</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">line</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;22&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#FFAB70">    thumbnail</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">ImageFragment</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`;</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="argumentdefinitions" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">@argumentDefinitions</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">fragment 정의를 수정하고 프래그먼트가 사용할 수 있는 로컬 인수의 이름과 타입을 정의하는 지시문입니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">const</span><span style="color:#B392F0"> StoryFragment</span><span style="color:#E1E4E8"> = </span><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  fragment</span><span style="color:#B392F0"> StoryFragment</span><span style="color:#F97583"> on</span><span style="color:#79B8FF"> Story</span><span style="color:#B392F0"> @argumentDefinitions</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">line</span><span style="color:#E1E4E8">: {</span><span style="color:#9ECBFF">type</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;Int&quot;</span><span style="color:#E1E4E8">}) {</span></span>
<span class="line"><span style="color:#FFAB70">    title</span></span>
<span class="line"><span style="color:#FFAB70">    summary</span></span>
<span class="line"><span style="color:#FFAB70">    postedAt</span></span>
<span class="line"><span style="color:#FFAB70">    poster</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">PosterBylineFragment</span><span style="color:#B392F0"> @arguments</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">line</span><span style="color:#E1E4E8">: </span><span style="color:#FFAB70">$line</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#FFAB70">    thumbnail</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">ImageFragment</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`;</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="connection" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">@connection</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">이 @connection은 커서 기반의 페이지네이션을 구현하는 데 사용되며, Relay의 쿼리에서 페이징을 관리하기 위한 메커니즘을 제공합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  query</span><span style="color:#B392F0"> ExampleQuery</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">    user</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;123&quot;</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#FFAB70">      friends</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">first</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">after</span><span style="color:#E1E4E8">: </span><span style="color:#FFAB70">$cursor</span><span style="color:#E1E4E8">) </span><span style="color:#B392F0">@connection</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">key</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;ExampleQuery_friends&quot;</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#FFAB70">        edges</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">          node</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">            id</span></span>
<span class="line"><span style="color:#FFAB70">            name</span></span>
<span class="line"><span style="color:#E1E4E8">          }</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`</span></span>
<span class="line"></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">이 예시에서는 user 오브젝트의 friends 필드에 대해 페이징 처리를 하기 위해 @connection 지시어를 사용합니다. key 인자는 “ExampleQuery_friends”로 설정되어 Relay가 이 커넥션을 식별할 수 있도록 합니다. first와 after 인자는 페이지네이션을 제어하는 데 사용됩니다.</p>
<h4 id="include" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">@include</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">@include는 주어진 조건이 true일 때 쿼리의 특정 부분을 포함시키는 데 사용됩니다. 이는 동적인 쿼리 작성에 유용하며, 필요에 따라 서버로부터 받아오는 데이터를 조절할 수 있게 해줍니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  query</span><span style="color:#B392F0"> ExampleQuery</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">$isDetailed</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">Boolean</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">$skipUser</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">Boolean</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#FFAB70">    user</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;123&quot;</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#FFAB70">      id</span></span>
<span class="line"><span style="color:#FFAB70">      name</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">UserDetails</span><span style="color:#B392F0"> @include</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">if</span><span style="color:#E1E4E8">: </span><span style="color:#FFAB70">$isDetailed</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="skip" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">@skip</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">@skip은 주어진 조건이 true일 때 쿼리의 특정 부분을 제외시키는 데 사용됩니다. 이를 통해 불필요한 데이터의 요청을 줄이고, 네트워크 트래픽과 서버 부하를 감소시킬 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">graphql</span><span style="color:#E1E4E8">`</span></span>
<span class="line"><span style="color:#F97583">  query</span><span style="color:#B392F0"> ExampleQuery</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">$isDetailed</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">Boolean</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">$skipUser</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">Boolean</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#FFAB70">    user</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;123&quot;</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#FFAB70">      id</span></span>
<span class="line"><span style="color:#FFAB70">      name</span></span>
<span class="line"><span style="color:#F97583">      ...</span><span style="color:#FFAB70">UserContacts</span><span style="color:#B392F0"> @skip</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">if</span><span style="color:#E1E4E8">: </span><span style="color:#FFAB70">$skipUser</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">`</span></span>
<span class="line"></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h2 id="store" class="text-3xl font-semibold text-foreground mt-8 mb-4 w-full">Store</h2>
<p class="text-foreground leading-relaxed mb-4 w-full"><a class="text-blue-500 dark:text-blue-400 hover:underline" target="_blank" rel="noopener noreferrer" href="https://relay.dev/docs/api-reference/store/">here</a>
Relay는 GraphQL 데이터를 캐싱하는 저장소가 존재합니다. 이 저장소에 접근하는 방법에 대해서 알아보겠습니다.</p>
<h3 id="recordsourceselectorproxy" class="text-2xl font-medium text-foreground mt-6 mb-3 w-full">RecordSourceSelectorProxy</h3>
<p class="text-foreground leading-relaxed mb-4 w-full">RecordSourceSelectorProxy는 업데이터 함수가 인수로 받는 저장소 유형입니다. 다음은 RecordSourceSelectorProxy 인터페이스입니다:</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> RecordSourceSelectorProxy</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  create</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">dataID</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">typeName</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> RecordProxy</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">  delete</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">dataID</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">  get</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">dataID</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#F97583"> ?</span><span style="color:#B392F0">RecordProxy</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">  getRoot</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">:</span><span style="color:#B392F0"> RecordProxy</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">  getRootField</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">fieldName</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#F97583"> ?</span><span style="color:#B392F0">RecordProxy</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">  getPluralRootField</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">fieldName</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#F97583"> ?</span><span style="color:#B392F0">Array</span><span style="color:#E1E4E8">&lt;</span><span style="color:#F97583">?</span><span style="color:#B392F0">RecordProxy</span><span style="color:#E1E4E8">&gt;;</span></span>
<span class="line"><span style="color:#B392F0">  invalidateStore</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="createdataid-string-typename-string-recordproxy" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">create(dataID: string, typeName: string): RecordProxy</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">GraphQL 스키마에 정의된 데이터ID와 유형 이름이 주어지면 스토어에 새 레코드를 생성합니다. 새로 생성된 레코드를 변경하는 인터페이스 역할을 하는 RecordProxy를 반환합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> record</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> store.</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">(dataID, </span><span style="color:#9ECBFF">&#39;Todo&#39;</span><span style="color:#E1E4E8">);</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="deletedataid-string-void" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">delete(dataID: string): void</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">주어진 데이터ID를 가진 레코드를 스토어에서 삭제합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#E1E4E8">store.</span><span style="color:#B392F0">delete</span><span style="color:#E1E4E8">(dataID);</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="getdataid-string-recordproxy" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">get(dataID: string): ?RecordProxy</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">주어진 데이터ID를 가진 레코드를 반환합니다. 레코드가 존재하지 않으면 null을 반환합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> record</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> store.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(dataID);</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="getroot-recordproxy" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">getRoot(): RecordProxy</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">스토어의 루트 레코드를 반환합니다. 루트 레코드는 스키마의 Query 타입에 해당합니다.</p>
<p class="text-foreground leading-relaxed mb-4 w-full">아래와 같이 정의되어 있을 떄,</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">viewer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  id</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">아래와 같이 사용할 수 있습니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> root</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> store.</span><span style="color:#B392F0">getRoot</span><span style="color:#E1E4E8">();</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="getpluralrootfieldfieldname-string" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">getPluralRootField(fieldName: string)</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">GraphQL 문서에 정의된 대로 fieldName이 주어진 스토어에서 컬렉션을 나타내는 루트 필드를 검색합니다. 레코드 프록시 배열을 반환합니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#B392F0">nodes</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">first</span><span style="color:#E1E4E8">: 10) {</span></span>
<span class="line"><span style="color:#6A737D">  # ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> nodes</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> store.</span><span style="color:#B392F0">getPluralRootField</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;nodes&#39;</span><span style="color:#E1E4E8">);</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<h4 id="invalidatestore-void" class="text-xl font-medium text-foreground mt-5 mb-2 w-full">invalidateStore(): void</h4>
<p class="text-foreground leading-relaxed mb-4 w-full">릴레이 스토어를 전역적으로 무효화합니다. 이렇게 하면 무효화가 발생하기 전에 스토어에 기록된 모든 데이터가 부실 데이터로 간주되어 다음에 environment.check()로 쿼리를 검사할 때 다시 가져와야 하는 것으로 간주됩니다.</p>
<div class="relative my-4 w-full group"><pre class="overflow-x-auto p-4 rounded-lg bg-gray-900 dark:bg-gray-950 shadow-lg"><code class="bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded font-mono text-sm"><span class="line"><span style="color:#E1E4E8">store.</span><span style="color:#B392F0">invalidateStore</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">environment.</span><span style="color:#B392F0">check</span><span style="color:#E1E4E8">(query) </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> &#39;stale&#39;</span></span></code></pre><button class="absolute top-2 right-2 p-2 rounded-md transition-all z-40 cursor-pointer bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-white opacity-0 group-hover:opacity-100" aria-label="Copy code" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p class="text-foreground leading-relaxed mb-4 w-full">1</p> </article> </div>  </main> <link rel="preload" as="image" href="https://github.com/gitsunmin.png"/><footer class="p-4 mt-4 flex flex-col gap-y-4 bg-background-footer text-foreground-footer"><div class="flex items-center gap-4 justify-cente w-full"><img src="https://github.com/gitsunmin.png" alt="logo" class="rounded-full size-10"/><span>Powered by Gitsunmin</span></div><ul class="flex gap-2 justify-end"><li><a href="https://github.com/gitsunmin" target="_blank" rel="noreferrer" class="text-blue-500 hover:underline">GitHub</a></li><li><a href="https://www.linkedin.com/in/gitsunmin/" target="_blank" rel="noreferrer" class="text-blue-500 hover:underline">LinkedIn</a></li></ul></footer>  </astro-slot><!--astro:end--></astro-island> </body></html>