# What is new in React 19

## useActionState

```tsx
function ChangeName({ name, setName }) {
  const [error, submitAction, isPending] = useActionState(
    async (previousState, formData) => {
      const error = await updateName(formData.get("name"));

      if (error) return error; 

      redirect("/path");

      return null;
    },
    null,
  );

  return (
    <form action={submitAction}>
      <input type="text" name="name" />
      <button type="submit" disabled={isPending}>Update</button>
      {error && <p>{error}</p>}
    </form>
  );
}
```

ìœ„ì—ì„œ ë³¸ ê²ƒ ì²˜ëŸ¼ `useActionState`ëŠ” inputìœ¼ë¡œ ë¹„ë™ê¸° Callbackì„ ë°›ê³ , Tupleë¡œ 3ê°€ì§€ì˜ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤. Inputìœ¼ë¡œ ë°›ëŠ” Callbackì€ submitActionì´ ì‹¤í–‰ë˜ì–´ì§ˆ ë•Œì— í˜¸ì¶œë˜ëŠ” ë¡œì§ì…ë‹ˆë‹¤. ì´ì „ê°’ê³¼ ì…ë ¥ë°›ì€ ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ Callbackì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì„ useActionStateì˜ ì²« ë²ˆì§¸ ì¸ìì¸ errorë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ isPendingì€ Callbackì˜ ë¹„ë™ê¸°ê°€ ì™„ë£Œë˜ì–´ì§ˆ ë•Œê¹Œì§€ True ìƒíƒœë¥¼ ê°€ì§‘ë‹ˆë‹¤.
ì´ `useActionState`ëŠ” `<form />` íƒœê·¸ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, ê¸°ì¡´ì— useStateì™€ useTransitionì„ ì‚¬ìš©í•˜ë˜ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## useFormStatus

```tsx
const { pending, data, method, action } = useFormStatus();
```

useFormStatusëŠ” ì‚¬ìš©ìê°€ í¼ì„ ì œì¶œí•˜ëŠ” ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
ê° ê°’ì€ ì•„ë˜ì™€ ê°™ì€ ì˜ë¯¸ê°€ ìˆìŠµë‹ˆë‹¤. 
- pending: Typeì€ booleanì´ë©°, <form />dl ì œì¶œì´ ì§„í–‰ì¤‘ì¸ ê²½ìš° trueë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- data: Typeì€ objectì´ë©°, ì œì¶œí•œ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆëŠ” ê°ì²´ì…ë‹ˆë‹¤. ì œì¶œì´ ì§„í–‰ì¤‘ì´ê±°ë‚˜ <form />dlì´ ì—†ìœ¼ë©´ nullì„ ë°˜í™˜í•©ë‹ˆë‹¤.
- method: Typeì€ stringì´ë©°, ì œì¶œí•˜ëŠ” Methodë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ GETì…ë‹ˆë‹¤. ì´ ê°’ì€ ì‚¬ìš©ìê°€ ì œì¶œí•  ë•Œ í•„ìš”í•œ Methodì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- action: Typeì€ functionì´ë©°, ì œì¶œí•˜ëŠ” ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Actionì…ë‹ˆë‹¤. ì´ ê°’ì€ ì‚¬ìš©ìê°€ ì œì¶œí•  ë•Œ í•„ìš”í•œ Actionì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { useFormStatus } from "react-dom";

function Submit() {
  const { pending, action } = useFormStatus();

  return (
    <button type="submit" disabled={pending}>
      {pending ? "Submitting..." : "Submit"}
    </button>
  );
}

function Form({ action }) {
  return (
    <form action={action}>
      <Submit />
    </form>
  );
}

export default function App() {
  return <Form action={action} />;
}

```


## useOptimistic

```tsx
function ChangeName({currentName, onUpdateName}) {
  const [optimisticName, setOptimisticName] = useOptimistic(currentName);

  const submitAction = async formData => {
    const newName = formData.get("name");
    setOptimisticName(newName);
    const updatedName = await updateName(newName);
    onUpdateName(updatedName);
  };

  return (
    <form action={submitAction}>
      <p>Your name is: {optimisticName}</p>
      <p>
        <label>Change Name:</label>
        <input
          type="text"
          name="name"
          disabled={currentName !== optimisticName}
        />
      </p>
    </form>
  );
}
```

useOptimisticì€ ì¼ë°˜ì ìœ¼ë¡œ async actionì´ ì§„í–‰ì¤‘ì¼ ë•Œ ë‹¤ë¥¸ ìƒíƒœë¥¼ í‘œì‹œí•  ë–„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë§ ê·¸ëŒ€ë¡œ, ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ê¸° ì „ì— ë‚™ê´€ì ìœ¼ë¡œ ë³µì‚¬ëœ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

## use

```tsx
function Comments({commentsPromise}) {
  // `use` will suspend until the promise resolves.
  const comments = use(commentsPromise);
  return comments.map(comment => <p key={comment.id}>{comment}</p>);
}

function Page({commentsPromise}) {
  // When `use` suspends in Comments,
  // this Suspense boundary will be shown.
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Comments commentsPromise={commentsPromise} />
    </Suspense>
  )
}
```

ì´ use í›…ì€ Promiseë¥¼ resolveí•˜ê³ , ê°’ì„ ë°˜í™˜í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ Promiseê°€ resolve ë˜ëŠ” ë™ì•ˆì—ëŠ” `<Sespense >`ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

## Ref

```tsx
function MyInput({placeholder, ref}) {
  return <input placeholder={placeholder} ref={ref} />
}

//...
<MyInput ref={ref} />
```

ì´ì œ Custom Componentì—ì„œë„ ref propsë¥¼ ê·¸ëƒ¥ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ˜‹

## hydration errors

ì´ì œ hydration errorsì˜ ìœ„ì¹˜ë¥¼ ì •í™•í•˜ê²Œ Consoleì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


# References
- https://react.dev/blog/2024/04/25/react-19