# Gritql

## GritQLì´ë€?
**GritQL**ì€ ì½”ë“œë² ì´ìŠ¤ì—ì„œ íŠ¹ì • íŒ¨í„´ì„ **ê²€ìƒ‰(Search)**í•˜ê³  **ë³€í™˜(Transform)**í•˜ê¸° ìœ„í•œ **ì„ ì–¸ì  ì¿¼ë¦¬ ì–¸ì–´**ì…ë‹ˆë‹¤. Tree-sitter ê¸°ë°˜ AST ë§¤ì¹­ì„ ì‚¬ìš©í•´ ì½”ë“œ êµ¬ì¡°ë¥¼ ì´í•´í•˜ë©°, ì½”ë“œ ë¦¬íŒ©í† ë§, API ë§ˆì´ê·¸ë ˆì´ì…˜, ë¦°íŠ¸ ê·œì¹™ ìë™í™”ì— ê°•ë ¥í•˜ê²Œ í™œìš©ë©ë‹ˆë‹¤.

> "ì½”ë“œ ê·¸ ìì²´ë¥¼ ì¿¼ë¦¬ë¡œ ì“´ë‹¤"ëŠ” ì½˜ì…‰íŠ¸ë¡œ, `console.log($msg)`ì™€ ê°™ì´ ì½”ë“œ ì˜ˆì‹œ ê·¸ëŒ€ë¡œ íŒ¨í„´ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ì£¼ìš” íŠ¹ì§•

### 1. ì½”ë“œ ê¸°ë°˜ íŒ¨í„´ ë§¤ì¹­
- ì½”ë“œ ìŠ¤ë‹ˆí«ì„ **ë°±í‹±(``)** ìœ¼ë¡œ ê°ì‹¸ íŒ¨í„´ìœ¼ë¡œ ì‚¬ìš©
- `$ë³€ìˆ˜`ë¡œ ë©”íƒ€ë³€ìˆ˜ë¥¼ ì§€ì •í•´ ë‹¤ì–‘í•œ ì½”ë“œ êµ¬ì¡°ë¥¼ ë§¤ì¹­ ê°€ëŠ¥
```js
`console.log($msg)`
```

### 2. ì½”ë“œ ë³€í™˜ (Rewrite)
- `=>` ì—°ì‚°ìë¥¼ í†µí•´ ë§¤ì¹˜ëœ ì½”ë“œë¥¼ ìƒˆ ì½”ë“œë¡œ ëŒ€ì²´ ê°€ëŠ¥
```js
`console.log($msg)` => `winston.info($msg)`
```

### 3. ì¡°ê±´ í•„í„°ë§ (`where` ì ˆ)
- ë§¤ì¹­ëœ íŒ¨í„´ì— ì¡°ê±´ ì¶”ê°€ ê°€ëŠ¥ (e.g., íŠ¹ì • ë¸”ë¡ ë‚´/ì™¸ë¶€ ì—¬ë¶€)
```js
`console.log($msg)` => `.` where {
  $msg <: not within `if (DEBUG) { $_ }`
}
```

### 4. ë³µí•© íŒ¨í„´ ì¡°í•© (or / and)
```js
or {
  `console.log($msg)`,
  `console.error($msg)`
} => `logger.info($msg)`
```

### 5. ë¬¸ë§¥ í•œì •ì (`within`, `contains`, `after`, `before`)
- AST ê³„ì¸µ êµ¬ì¡°ë¥¼ í™œìš©í•œ ë¬¸ë§¥ ì œì•½ ê°€ëŠ¥
```js
`$call` where {
  $call <: within `try { $_ } catch { $_ }`
}
```

### 6. ë‹¤ì¤‘ ì–¸ì–´ ì§€ì›
- JS/TS, Python, Rust, Go, SQL, JSON, YAML, Terraform ë“±
- ë™ì¼ ë¬¸ë²•ìœ¼ë¡œ ë‹¤ì–‘í•œ ì–¸ì–´ ì²˜ë¦¬ ê°€ëŠ¥

### 7. íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- ê¸°ë³¸ ì œê³µë˜ëŠ” ìˆ˜ë°± ê°œì˜ í‘œì¤€ íŒ¨í„´ (ì˜ˆ: `react_to_hooks`)
- ì‚¬ìš©ì ì •ì˜ íŒ¨í„´ ëª¨ë“ˆ ì‘ì„± ë° ì¬ì‚¬ìš© ê°€ëŠ¥

---

## ì„¤ì¹˜ ë°©ë²•
```bash
npm install --location=global @getgrit/cli
```
ë˜ëŠ”:
```bash
curl -fsSL https://docs.grit.io/install | bash
```

---

## ì‚¬ìš© ì˜ˆì‹œ

### âœ… ì½˜ì†” ë¡œê·¸ë¥¼ `winston.log`ë¡œ êµì²´
```bash
grit apply '`console.log($msg)` => `winston.log($msg)`'
```

### âœ… `console.log` ì‚­ì œ (ë‹¨, try ë¸”ë¡ ì•ˆì€ ìœ ì§€)
```js
`console.log($msg)` => `.` where {
  $msg <: not within `try { $_ } catch { $_ }`
}
```

### âœ… í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ì•ˆì—ì„œëŠ” ë³€ê²½í•˜ì§€ ì•Šê¸°
```yaml
patterns:
  - name: replace_log
    body: |
      `console.log($msg)` => `winston.log($msg)` where {
        $msg <: not within or {
          `it($_, $_)`, `test($_, $_)`, `describe($_, $_)`
        }
      }
```

---

## í™œìš© ì‚¬ë¡€
- ëŒ€ê·œëª¨ **API ë³€ê²½ ë° ë¦¬íŒ©í† ë§**
- í”„ë ˆì„ì›Œí¬ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì˜ˆ: `react_to_hooks`)
- **ìë™ ë¦°íŠ¸ ë° ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬** (CIì—ì„œ `grit check` ì‚¬ìš©)
- ë³´ì•ˆ íŒ¨í„´ íƒì§€ ë° ìë™ ìˆ˜ì •
- ë‹¤êµ­ì–´ ì½”ë“œë² ì´ìŠ¤ êµ¬ì¡°ì  ê²€ìƒ‰

---

### ğŸ”— ê³µì‹ ë¬¸ì„œ: [https://docs.grit.io](https://docs.grit.io)
### ğŸ“¦ GitHub: [https://github.com/getgrit/gritql](https://github.com/getgrit/gritql)

